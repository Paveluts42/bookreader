syntax = "proto3";
package api;
option go_package = "github.com/Paveluts42/bookreader/backend/api";


message Book {
  string id = 1;
  string title = 2;
  string author = 3;
  string file_path = 4;
  string cover_url = 5;
  int32 page = 6;
  int32 page_all = 7;
  string user_id = 8;
}

message UploadRequest {
  string book_id = 1;
  bytes chunk = 2;
  string title = 3;
  string author = 4;
  string user_id = 5;
}
message UploadResponse {
  string book_id = 1;
  bool ok = 2;
}
message DeleteBookRequest {
  string book_id = 1;
}
message DeleteBookResponse {
  bool ok = 1;
}
message GetBooksRequest {}
message GetBooksResponse {
  repeated Book books = 1;
}
message GetBookRequest {
  string book_id = 1;
}
message GetBookResponse {
  Book book = 1;
  string error = 2;
}
message UpdateBookPageRequest {
  string book_id = 1;
  int32 page = 2;
}
message UpdateBookPageResponse {
  bool ok = 1;
}

service BookService {
  rpc UploadPDF(UploadRequest) returns (UploadResponse);
  rpc DeleteBook(DeleteBookRequest) returns (DeleteBookResponse);
  rpc GetBooks(GetBooksRequest) returns (GetBooksResponse);
  rpc GetBook(GetBookRequest) returns (GetBookResponse);
  rpc UpdateBookPage(UpdateBookPageRequest) returns (UpdateBookPageResponse);
}